package com.thingtrack.workbench.view.tacho;

import com.vaadin.annotations.AutoGenerated;
import com.vaadin.ui.Alignment;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.HorizontalLayout;
import com.vaadin.ui.Label;
import com.vaadin.ui.ProgressBar;
import com.vaadin.ui.VerticalLayout;

@SuppressWarnings("serial")
public class ProgressTachoComponent extends CustomComponent {

	/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

	@AutoGenerated
	private VerticalLayout mainLayout;
	@AutoGenerated
	private Label lblTotalTachoSize;
	@AutoGenerated
	private HorizontalLayout progressLayout;
	@AutoGenerated
	private Label lblTachoSize;
	@AutoGenerated
	private ProgressBar prbTacho;
	/**
	 * The constructor should first build the main layout, set the
	 * composition root and then do any custom initialization.
	 *
	 * The constructor will not be automatically regenerated by the
	 * visual editor.
	 */
	public ProgressTachoComponent() {
		buildMainLayout();
		setCompositionRoot(mainLayout);

		// TODO add user code here
		prbTacho.setValue(0.0f);
		lblTotalTachoSize.setVisible(false);
		lblTachoSize.setValue("0 KB");
	}

	public void setTachoProgressBar(int progress) {
		prbTacho.setValue((float)progress);
		lblTachoSize.setValue(Integer.toString(progress) + "%");
	}
	
	public void setTotalTachoSize(String totSize) {
		progressLayout.setVisible(false);
		
		lblTotalTachoSize.setVisible(true);
		lblTotalTachoSize.setValue(totSize);
	}

	@AutoGenerated
	private VerticalLayout buildMainLayout() {
		// common part: create layout
		mainLayout = new VerticalLayout();
		mainLayout.setImmediate(false);
		mainLayout.setWidth("-1px");
		mainLayout.setHeight("-1px");
		mainLayout.setMargin(false);
		
		// top-level component properties
		setWidth("-1px");
		setHeight("-1px");
		
		// progressLayout
		progressLayout = buildProgressLayout();
		mainLayout.addComponent(progressLayout);
		
		// lblTotalTachoSize
		lblTotalTachoSize = new Label();
		lblTotalTachoSize.setImmediate(false);
		lblTotalTachoSize.setWidth("-1px");
		lblTotalTachoSize.setHeight("-1px");
		lblTotalTachoSize.setValue("Label");
		mainLayout.addComponent(lblTotalTachoSize);
		
		return mainLayout;
	}

	@AutoGenerated
	private HorizontalLayout buildProgressLayout() {
		// common part: create layout
		progressLayout = new HorizontalLayout();
		progressLayout.setImmediate(false);
		progressLayout.setWidth("-1px");
		progressLayout.setHeight("-1px");
		progressLayout.setMargin(false);
		progressLayout.setSpacing(true);
		
		// prbTacho
		prbTacho = new ProgressBar();
		prbTacho.setImmediate(false);
		prbTacho.setWidth("-1px");
		prbTacho.setHeight("-1px");
		progressLayout.addComponent(prbTacho);
		
		// lblTachoSize
		lblTachoSize = new Label();
		lblTachoSize.setImmediate(false);
		lblTachoSize.setWidth("-1px");
		lblTachoSize.setHeight("-1px");
		lblTachoSize.setValue("Label");
		progressLayout.addComponent(lblTachoSize);
		progressLayout.setComponentAlignment(lblTachoSize, new Alignment(33));
		
		return progressLayout;
	}

}
